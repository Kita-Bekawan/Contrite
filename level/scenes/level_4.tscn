[gd_scene load_steps=41 format=3 uid="uid://ddg51foqrjuyi"]

[ext_resource type="Script" path="res://level/scripts/level_4.gd" id="1_5ftq2"]
[ext_resource type="Script" path="res://level/scenes/Camera2D.gd" id="1_8m1co"]
[ext_resource type="Texture2D" uid="uid://clwfttcclwuje" path="res://level/sprites/background/background_layer_1.png" id="1_hfgya"]
[ext_resource type="PackedScene" uid="uid://dq6ogc5jq45ca" path="res://level/scenes/checkpoint.tscn" id="1_itdqw"]
[ext_resource type="Texture2D" uid="uid://cx2c6wur77jf" path="res://level/sprites/background/background_layer_2.png" id="2_ifsrf"]
[ext_resource type="PackedScene" uid="uid://goesjr3wcc5e" path="res://player/scenes/player.tscn" id="2_ov2u1"]
[ext_resource type="Texture2D" uid="uid://cfs7v4sf5v2gp" path="res://level/sprites/background/background_layer_3.png" id="3_ndv7f"]
[ext_resource type="Texture2D" uid="uid://d21jy7nvqj8sa" path="res://level/sprites/decorations/shop_anim.png" id="5_08ekh"]
[ext_resource type="Texture2D" uid="uid://b7huisxi6foen" path="res://level/sprites/decorations/sign.png" id="7_yjng3"]
[ext_resource type="Texture2D" uid="uid://ksx68y3ci88x" path="res://level/sprites/Eleonore/Idle/Idle1.png" id="8_p1n01"]
[ext_resource type="Texture2D" uid="uid://dgt4ant81nhy4" path="res://level/sprites/Eleonore/Idle/Idle2.png" id="9_ftgy6"]
[ext_resource type="PackedScene" uid="uid://bdmtupkq00ytq" path="res://level/scenes/interact_object.tscn" id="9_nay3f"]
[ext_resource type="Texture2D" uid="uid://uemdugv0mh7t" path="res://level/sprites/Eleonore/Idle/Idle3.png" id="10_x4gr3"]
[ext_resource type="Texture2D" uid="uid://cperkvxc3dj1q" path="res://level/sprites/Eleonore/Idle/Idle4.png" id="11_pxgv0"]
[ext_resource type="Texture2D" uid="uid://b2xgoalde4obo" path="res://level/sprites/Eleonore/Idle/Idle5.png" id="12_b33t3"]
[ext_resource type="Texture2D" uid="uid://unnvpq3r1aqs" path="res://level/sprites/druid/druid_1.png" id="12_gusmq"]
[ext_resource type="Texture2D" uid="uid://b87jrmskun08i" path="res://level/sprites/Eleonore/Idle/Idle6.png" id="13_3vxbt"]
[ext_resource type="Texture2D" uid="uid://do40qpgav53py" path="res://level/sprites/druid/druid_2.png" id="13_pe56u"]
[ext_resource type="Texture2D" uid="uid://dgbr8auuwm04n" path="res://level/sprites/Eleonore/Idle/Idle7.png" id="14_2jgic"]
[ext_resource type="PackedScene" uid="uid://btjuha38sw0qg" path="res://enemies/snail/snail.tscn" id="14_f6wyv"]
[ext_resource type="Texture2D" uid="uid://482au5rns622" path="res://level/sprites/druid/druid_3.png" id="14_kxbcw"]
[ext_resource type="PackedScene" uid="uid://c2lhtvfidh504" path="res://moving_platform/moving_platform.tscn" id="15_0jp3u"]
[ext_resource type="Texture2D" uid="uid://jm7gvbghh3ud" path="res://level/sprites/druid/druid_4.png" id="15_f7mtf"]
[ext_resource type="Texture2D" uid="uid://baywe1e283vou" path="res://level/sprites/Eleonore/Idle/Idle8.png" id="15_jjqm4"]
[ext_resource type="Texture2D" uid="uid://b50byemels1ll" path="res://level/sprites/Eleonore/Idle/Idle9.png" id="16_ul0qm"]
[ext_resource type="Script" path="res://level/scripts/portal.gd" id="25_b67th"]
[ext_resource type="PackedScene" uid="uid://bwne6fn8atras" path="res://hud/hud.tscn" id="29_674gc"]
[ext_resource type="PackedScene" uid="uid://davnfb8ydny4h" path="res://level/scenes/fountain.tscn" id="30_qadcq"]
[ext_resource type="PackedScene" uid="uid://bjoxftew8nsl" path="res://level/scenes/area_fall.tscn" id="31_njmci"]

[sub_resource type="AtlasTexture" id="AtlasTexture_c1k87"]
atlas = ExtResource("5_08ekh")
region = Rect2(0, 0, 118, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_hm63y"]
atlas = ExtResource("5_08ekh")
region = Rect2(118, 0, 118, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_f360c"]
atlas = ExtResource("5_08ekh")
region = Rect2(236, 0, 118, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_aelu6"]
atlas = ExtResource("5_08ekh")
region = Rect2(354, 0, 118, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_og68p"]
atlas = ExtResource("5_08ekh")
region = Rect2(472, 0, 118, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_oq27p"]
atlas = ExtResource("5_08ekh")
region = Rect2(590, 0, 118, 128)

[sub_resource type="SpriteFrames" id="SpriteFrames_uu4l8"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_c1k87")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hm63y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_f360c")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_aelu6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_og68p")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_oq27p")
}],
"loop": true,
"name": &"default",
"speed": 10.0
}]

[sub_resource type="TileSet" id="TileSet_3uf8l"]
physics_layer_0/collision_layer = 1

[sub_resource type="SpriteFrames" id="SpriteFrames_pbbi7"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("12_gusmq")
}, {
"duration": 1.0,
"texture": ExtResource("13_pe56u")
}, {
"duration": 1.0,
"texture": ExtResource("14_kxbcw")
}, {
"duration": 1.0,
"texture": ExtResource("15_f7mtf")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}]

[sub_resource type="SpriteFrames" id="SpriteFrames_qe2dh"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("8_p1n01")
}, {
"duration": 1.0,
"texture": ExtResource("9_ftgy6")
}, {
"duration": 1.0,
"texture": ExtResource("10_x4gr3")
}, {
"duration": 1.0,
"texture": ExtResource("11_pxgv0")
}, {
"duration": 1.0,
"texture": ExtResource("12_b33t3")
}, {
"duration": 1.0,
"texture": ExtResource("13_3vxbt")
}, {
"duration": 1.0,
"texture": ExtResource("14_2jgic")
}, {
"duration": 1.0,
"texture": ExtResource("15_jjqm4")
}, {
"duration": 1.0,
"texture": ExtResource("16_ul0qm")
}],
"loop": true,
"name": &"idle",
"speed": 8.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_pfs5r"]
size = Vector2(128, 90)

[node name="Level4" type="Node2D"]
script = ExtResource("1_5ftq2")

[node name="Camera2D" type="Camera2D" parent="."]
offset = Vector2(320, -180)
script = ExtResource("1_8m1co")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="HUD" parent="CanvasLayer" instance=ExtResource("29_674gc")]

[node name="Shop" type="AnimatedSprite2D" parent="."]
position = Vector2(1430, -192)
scale = Vector2(2, 2)
sprite_frames = SubResource("SpriteFrames_uu4l8")
autoplay = "default"
frame_progress = 0.904291

[node name="Sign" type="Sprite2D" parent="."]
position = Vector2(3647, -127)
scale = Vector2(2, 2)
texture = ExtResource("7_yjng3")

[node name="Fountain" parent="." instance=ExtResource("30_qadcq")]
z_index = -1
position = Vector2(898, -120)

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]

[node name="ParallaxLayer" type="ParallaxLayer" parent="ParallaxBackground"]
motion_mirroring = Vector2(640, 0)

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer"]
self_modulate = Color(0.359069, 0.359069, 0.359069, 1)
position = Vector2(320, -180)
scale = Vector2(2, 2)
texture = ExtResource("1_hfgya")

[node name="Sprite2D2" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer"]
self_modulate = Color(0.360784, 0.360784, 0.360784, 1)
position = Vector2(960, -180)
scale = Vector2(2, 2)
texture = ExtResource("1_hfgya")

[node name="ParallaxLayer2" type="ParallaxLayer" parent="ParallaxBackground"]
motion_mirroring = Vector2(640, 0)

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer2"]
self_modulate = Color(0.259, 0.37, 0.3552, 1)
position = Vector2(320, -180)
scale = Vector2(2, 2)
texture = ExtResource("2_ifsrf")

[node name="Sprite2D2" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer2"]
self_modulate = Color(0.258824, 0.368627, 0.356863, 1)
position = Vector2(960, -180)
scale = Vector2(2, 2)
texture = ExtResource("2_ifsrf")

[node name="ParallaxLayer3" type="ParallaxLayer" parent="ParallaxBackground"]
motion_mirroring = Vector2(640, 0)

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer3"]
self_modulate = Color(0.22812, 0.24, 0.2184, 1)
position = Vector2(320, -180)
scale = Vector2(2, 2)
texture = ExtResource("3_ndv7f")

[node name="Sprite2D2" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer3"]
self_modulate = Color(0.227451, 0.239216, 0.219608, 1)
position = Vector2(960, -180)
scale = Vector2(2, 2)
texture = ExtResource("3_ndv7f")

[node name="TileMap" type="TileMap" parent="."]
scale = Vector2(2, 2)
tile_set = SubResource("TileSet_3uf8l")
format = 2
layer_0/tile_data = PackedInt32Array(-196608, 65536, 2, -131072, 65536, 2, -262144, 65536, 0, -262143, 131072, 0, -262142, 196608, 0, -262141, 262144, 0, -262140, 327680, 0, -196604, 327680, 1, -131070, 327680, 12, -131069, 131072, 0, -131068, 196608, 0, -131067, 262144, 0, -196607, 65536, 2, -196606, 65536, 2, -196605, 65536, 2, -131071, 65536, 2, -65536, 65536, 2, -65535, 65536, 2, -65534, 65536, 2, -65533, 65536, 2, -65532, 65536, 2, -65531, 65536, 2, -65530, 65536, 2, -65529, 65536, 2, -65528, 65536, 2, -65527, 65536, 2, -131066, 262144, 0, -131065, 262144, 0, -131064, 262144, 0, -131063, 262144, 0, -131062, 327680, 0, -65526, 327680, 1, -131058, 0, 0, -65522, 0, 1, -65521, 65536, 2, -65520, 65536, 2, -65519, 65536, 2, -65518, 65536, 2, -131057, 65536, 0, -131056, 131072, 0, -131055, 196608, 0, -131054, 262144, 0, -131053, 65536, 0, -131052, 131072, 0, -131051, 196608, 0, -131050, 262144, 0, -131049, 65536, 0, -131048, 131072, 0, -131047, 196608, 0, -65517, 65536, 2, -65516, 65536, 2, -65515, 65536, 2, -65514, 65536, 2, -65513, 65536, 2, -65512, 65536, 2, -65511, 65536, 2, -131046, 262144, 0, -131045, 65536, 0, -131044, 131072, 0, -131043, 196608, 0, -131042, 262144, 0, -131041, 65536, 0, -131040, 131072, 0, -131039, 196608, 0, -65510, 65536, 2, -65509, 65536, 2, -65508, 65536, 2, -65507, 65536, 2, -65506, 65536, 2, -65505, 65536, 2, -65504, 65536, 2, -65503, 65536, 2, -131038, 262144, 0, -131037, 65536, 0, -131036, 131072, 0, -131035, 196608, 0, -131034, 262144, 0, -131033, 65536, 0, -131032, 131072, 0, -131031, 65536, 0, -131030, 131072, 0, -131029, 196608, 0, -131028, 262144, 0, -131027, 65536, 0, -131026, 131072, 0, -131025, 196608, 0, -65502, 65536, 2, -65501, 65536, 2, -65500, 65536, 2, -65499, 65536, 2, -65498, 65536, 2, -65497, 65536, 2, -65496, 65536, 2, -65495, 65536, 2, -65494, 65536, 2, -65493, 65536, 2, -65492, 65536, 2, -65491, 65536, 2, -65490, 65536, 2, -65489, 65536, 2, -131024, 262144, 0, -131023, 65536, 0, -131022, 131072, 0, -131021, 196608, 0, -131020, 262144, 0, -131019, 65536, 0, -131018, 131072, 0, -131017, 196608, 0, -131016, 262144, 0, -131015, 65536, 0, -131014, 131072, 0, -131013, 196608, 0, -65488, 65536, 2, -65487, 65536, 2, -65486, 65536, 2, -65485, 65536, 2, -65484, 65536, 2, -65483, 65536, 2, -65482, 65536, 2, -65481, 65536, 2, -65480, 65536, 2, -65479, 65536, 2, -65478, 65536, 2, -65477, 65536, 2, -720897, 327680, 1, -655361, 327680, 1, -589825, 327680, 1, -524289, 327680, 1, -393217, 327680, 1, -458753, 327680, 1, -327681, 327680, 1, -262145, 327680, 1, -196609, 327680, 1, -131073, 327680, 1, -65537, 327680, 1, -1, 327680, 1, -131010, 65536, 0, -131009, 65536, 0, -131007, 131072, 0, -131008, 65536, 0, -131004, 65536, 2, -65474, 65536, 2, -65473, 65536, 2, -65472, 65536, 2, -65471, 65536, 2, -65468, 65536, 2, -131003, 327680, 1, -65467, 327680, 1, -131012, 262144, 0, -65476, 65536, 2, -131011, 65536, 0, -65475, 65536, 2, -196540, 65536, 2, -262076, 524288, 0, -262075, 589824, 0, -196539, 327680, 1, -65470, 65536, 2, -131006, 0, 2, -196542, 0, 2, -262078, 524288, 0, -262077, 524288, 0, -196541, 65536, 2, -131005, 65536, 2, -65469, 65536, 2, -262070, 65536, 0, -262069, 65536, 0, -262068, 65536, 0, -262067, 65536, 0, -262066, 65536, 0, -262065, 0, 1, -196534, 65536, 2, -130998, 65536, 2, -65462, 65536, 2, -65461, 65536, 2, -65460, 65536, 2, -65459, 65536, 2, -65458, 65536, 2, -65457, 0, 1, -196529, 0, 1, -196530, 65536, 2, -196531, 65536, 2, -196532, 65536, 2, -196533, 65536, 2, -130997, 65536, 2, -130996, 65536, 2, -130995, 65536, 2, -130994, 65536, 2, -130993, 0, 1, -262071, 65536, 0, -196535, 0, 3, -130999, 0, 3, -65463, 0, 3, -327601, 0, 1, -393137, 0, 0, -393136, 65536, 0, -327600, 65536, 1, -262064, 65536, 1, -196528, 65536, 1, -130992, 65536, 1, -65456, 65536, 1, -393135, 131072, 0, -393134, 196608, 0, -393133, 262144, 0, -393132, 327680, 0, -327599, 65536, 1, -327598, 65536, 1, -327597, 65536, 1, -262061, 65536, 1, -262062, 65536, 1, -262063, 65536, 1, -196527, 65536, 1, -65455, 65536, 1, -130991, 65536, 1, -196526, 65536, 1, -196525, 65536, 1, -130989, 65536, 1, -65453, 65536, 1, -65454, 65536, 1, -130990, 65536, 1, -262060, 327680, 2, -196524, 327680, 2, -327596, 327680, 2, -130988, 327680, 2, -65452, 327680, 2, -393120, 0, 0, -393119, 65536, 0, -393118, 65536, 0, -393117, 65536, 0, -393116, 65536, 0, -393115, 327680, 0, -327584, 0, 1, -262048, 0, 1, -196512, 0, 1, -130976, 0, 1, -65440, 0, 1, -327583, 65536, 1, -262047, 65536, 1, -196511, 65536, 1, -130975, 65536, 1, -65439, 65536, 1, -65438, 65536, 1, -130974, 65536, 1, -196510, 65536, 1, -262046, 65536, 1, -327582, 65536, 1, -327581, 65536, 1, -327580, 65536, 1, -262044, 65536, 1, -130973, 65536, 2, -65437, 65536, 1, -262045, 65536, 1, -196508, 327680, 12, -130972, 65536, 2, -65436, 65536, 2, -65435, 65536, 2, -130971, 65536, 2, -196507, 65536, 0, -327579, 327680, 1, -262043, 327680, 1, -196506, 65536, 0, -196505, 65536, 0, -196504, 65536, 0, -130970, 65536, 2, -130969, 65536, 2, -130968, 65536, 2, -65434, 65536, 2, -65433, 65536, 2, -65432, 65536, 2, -196503, 131072, 0, -196502, 131072, 0, -196501, 131072, 0, -196500, 131072, 0, -196499, 131072, 0, -196498, 131072, 0, -130967, 65536, 2, -130966, 65536, 2, -130965, 65536, 2, -130964, 65536, 2, -130963, 65536, 2, -130962, 65536, 2, -65426, 65536, 2, -65427, 65536, 2, -65428, 65536, 2, -65429, 65536, 2, -65431, 65536, 2, -65430, 65536, 2, -130961, 65536, 2, -130960, 65536, 2, -130959, 65536, 2, -130958, 65536, 2, -130957, 65536, 2, -130956, 65536, 2, -65420, 65536, 2, -65421, 65536, 2, -65422, 65536, 2, -65423, 65536, 2, -65424, 65536, 2, -65425, 65536, 2, -196497, 65536, 0, -196496, 65536, 0, -196495, 65536, 0, -196494, 65536, 0, -196493, 65536, 0, -196492, 65536, 0, -130955, 65536, 1, -130954, 65536, 1, -130953, 65536, 1, -65417, 65536, 1, -65418, 65536, 1, -65419, 65536, 1, -196491, 65536, 0, -196490, 65536, 0, -196489, 65536, 0, -196509, 131072, 2, -458635, 0, 5, -458634, 131072, 5, -458633, 196608, 5, -720779, 0, 2, -720778, 65536, 1, -720777, 65536, 1, -786315, 0, 1, -786314, 65536, 1, -786313, 65536, 1, -655243, 0, 3, -589707, 0, 4, -524171, 0, 3, -524170, 65536, 1, -524169, 65536, 1, -589705, 65536, 1, -655241, 65536, 1, -655242, 65536, 1, -589706, 65536, 1, -196488, 65536, 0, -196487, 65536, 0, -196486, 65536, 0, -196485, 65536, 0, -130952, 65536, 2, -130951, 65536, 2, -130950, 65536, 2, -130949, 65536, 2, -65413, 65536, 2, -65414, 65536, 2, -65415, 65536, 2, -65416, 65536, 2)

[node name="Druid" parent="." instance=ExtResource("9_nay3f")]
position = Vector2(1755, -110)

[node name="Druid" type="AnimatedSprite2D" parent="Druid"]
position = Vector2(43, 14)
scale = Vector2(2, 2)
sprite_frames = SubResource("SpriteFrames_pbbi7")
animation = &"idle"
autoplay = "idle"
frame_progress = 0.0988008

[node name="Mother" parent="." instance=ExtResource("9_nay3f")]
position = Vector2(3556, -153)
scale = Vector2(1.2, 1.2)

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Mother"]
position = Vector2(35, 18)
sprite_frames = SubResource("SpriteFrames_qe2dh")
animation = &"idle"
autoplay = "idle"
flip_h = true

[node name="Player" parent="." instance=ExtResource("2_ov2u1")]
position = Vector2(36, -137)
scale = Vector2(1, 1)
collision_mask = 65

[node name="MovingPlatform" parent="." node_paths=PackedStringArray("p1", "p2") instance=ExtResource("15_0jp3u")]
position = Vector2(2861, -80)
scale = Vector2(2, 2)
p1 = NodePath("../Markers/MP1_1")
p2 = NodePath("../Markers/MP1_2")

[node name="Markers" type="Node" parent="."]

[node name="MP1_1" type="Marker2D" parent="Markers"]
position = Vector2(2861, -80)

[node name="MP1_2" type="Marker2D" parent="Markers"]
position = Vector2(3001, -80)

[node name="ChangingLevel" type="Area2D" parent="."]
collision_mask = 32
script = ExtResource("25_b67th")
next_scene = "Level4A"

[node name="CollisionShape2D" type="CollisionShape2D" parent="ChangingLevel"]
position = Vector2(3899, -143)
shape = SubResource("RectangleShape2D_pfs5r")

[node name="Snail" parent="." instance=ExtResource("14_f6wyv")]
position = Vector2(2477, -146)
scale = Vector2(1.5, 1.5)

[node name="Checkpoint" parent="." instance=ExtResource("1_itdqw")]
visible = false
position = Vector2(73, -230)

[node name="AreaFall" parent="." instance=ExtResource("31_njmci")]
position = Vector2(-131, 1)
scale = Vector2(6.2, 1)
collision_layer = 64
collision_mask = 66

[connection signal="body_entered" from="ChangingLevel" to="ChangingLevel" method="_on_body_entered"]
